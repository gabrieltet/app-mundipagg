<!doctype html>

<!-- Angular Bootstrap -->
<html ng-app="csv2Mundi">
<head>
	<!-- Meta codes -->
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />

	<title>csv2mundi</title>
	<link rel="shortcut icon" type="image/png" href="/favicon.ico"/>

	<!-- 3rd Party Code -->

	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" />
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

	<!-- Stylesheet -->
	<link rel='stylesheet' href='/stylesheets/normalize.css' />
    <link rel='stylesheet' href='/stylesheets/style.css' />

	<!-- Engine -->

	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.16/angular.min.js"></script>
	<script src="js/angular/ng-file-upload-shim.js"></script> <!-- No html5 browsers support -->
	<script src="js/angular/ng-file-upload-all.js"></script>

	<script src="js/controllers/main.js"></script> 
	<script src="js/controllers/upload.js"></script> 
	<script src="js/services/files.js"></script> 
	<script src="js/core.js"></script>

</head>
<!-- bootstrap the controller -->
<body ng-controller="mainController">
	<!-- Navigation bar -->
	<nav class="navbar navbar-inverse">
		<div class="container-fluid">
			<div class="navbar-header">
				<a class="navbar-brand" href="#">csv2mundi</a>
			</div>
			<ul class="nav navbar-nav">
				<li ng-class="{active: isActive('/files')}"><a href="#">My files</a></li>
		    	<li ng-class="{active: isActive('/upload')}"><a href="#Upload">Upload</a></li>
		    </ul>
		    <ul class="nav navbar-nav navbar-right">
      			<li>
      				<a href="https://github.com/gabrieltet/csv2mundi">
      				<i class="fa fa-github" aria-hidden="true"></i> GitHub</a>
      			</li>
    		</ul>
 		 </div>
	</nav>
	<!-- Main container -->
	<div class="container">
		<div class="row">
				<div>
					<div class="page-header text-center">
								<h1>My files | <span class="label label-info">{{ files.length }} files</span></h1>
					</div>
					<p ng-hide="isEmpty" class="alert alert-warning"><strong>No files found :(</strong><br />Please upload a .csv file to have it listed.</p>
				</div>
				<div ng-repeat="file in files | filter:{status: 0} | orderBy : 'status'">
					<div class="col-md-4">
						<div class="panel panel-info">
							<div class="panel-heading">
									<i class="fa fa-check-circle-o" aria-hidden="true"></i> Ready to parse!
							</div>
							<div class="panel-body">
								<i class="fa fa-file-text-o fa-5x" aria-hidden="true"></i>
								<p class="help-block">Filename: {{files[$index].name}}   </p>
								<p class="help-block">Path: {{files[$index].path}}   </p>
							</div>
						</div>
					</div>
				</div>
		</div>
				<p class="text-center" ng-show="loading">
					<span class="fa fa-cog fa-spin fa-3x"></span>
				</p>

		<div class="page-header text-center">
				<h1>Upload your .csv file <i class="fa fa-upload" aria-hidden="true"></i></h1>
		</div>
		<!-- Upload form -->
			<div id="upload-form" class="row" name="Upload" ng-controller="uploadController">
				<div class="col-sm-8 col-sm-offset-2 text-center">
						<div class="form-group text-center">
							   <div ngf-drop ngf-select ng-model="file" class="well" 
        						ngf-drag-over-class="'dragover'" ngf-multiple="true" ngf-allow-dir="true"
        						accept="text/csv" ngf-pattern="'.csv'">
        								<p class="help-block">Click here or drag and drop a .csv file to upload..</p>
        						</div>
        						<div ngf-no-file-drop>File Drag/Drop is not supported for this browser</div>
        							<p class="text-center" ng-show="loading">
										<span class="fa fa-cog fa-spin fa-3x"></span>
										<div ng-show="loading" class="progress">
											<div ng-show="loading" class="progress-bar" role="progressbar" aria-valuenow="{{uploadPercentage}}" aria-valuemin="0" aria-valuemax="100" style="width:{{uploadPercentage}}%">{{uploadPercentage}}%</div>
										</div>
									</p>
								<div class="page-header text-center">
									<h4>Upload log</h4>
									<pre>{{log}}</pre>
								</div>
								
						</div>
			</div>
		</div>
	</div>
</body>
</html>